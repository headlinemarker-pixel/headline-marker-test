<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <title>Headline Marker｜プラン比較（テスト）</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <!-- 検索除外（実質非公開テスト用） -->
  <meta name="robots" content="noindex, nofollow">
  <style>
    :root { --brand:#6366F1; --bg:#EEF2FF; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic UI", "Noto Sans", sans-serif; margin:0; padding:32px; color:#111; background:var(--bg); }
    h1 { font-size:24px; margin:0; }
    .grid { display:flex; flex-wrap:wrap; gap:16px; }
    .title { display:flex; align-items:center; justify-content:center; gap:12px; margin-bottom:24px; }
    .title img { width:28px; height:28px; }
    .card { flex:1 1 280px; border:1px solid #e5e7eb; border-radius:12px; padding:20px; background:#fff; }
    .card h2 { font-size:20px; margin:0 0 8px; }
    .price { font-size:28px; font-weight:700; margin:8px 0 12px; }
    .actions { text-align:right; margin-top:8px; }
    ul { margin:0 0 16px 18px; }
    .btn { display:inline-block; padding:10px 16px; border-radius:8px; background:var(--brand); color:#fff; text-decoration:none; font-weight:600; }
    .btn:hover { filter:brightness(0.95); }
    .muted { color:#6b7280; font-size:12px; margin-top:8px; }
	/* --- table decorations --- */
    .pricing-table{ box-shadow:0 0 0 2px #c7d2fe; border-radius:12px; overflow:hidden; }  /* 外枠だけを太く見せるフレーム */
    .pricing-table thead th { background: rgba(99,102,241,.12); }                          /* 見出し行：少しだけ濃く */
    .pricing-table tbody tr:nth-child(odd) th,
    .pricing-table tbody tr:nth-child(odd) td { background: rgba(99,102,241,.05); }        /* ゼブラ（奇数）：濃さ+2% */
    .pricing-table tbody tr.cta-row th,
    .pricing-table tbody tr.cta-row td { background: rgba(99,102,241,.16); }               /* 最終行：帯感を強化 */
	#row-existing th, #row-existing td { border-top:1px solid #cbd5e1 !important; } /* 行A/Bの境界線（上側） */
	#row-first    th, #row-first    td { border-bottom:1px solid #cbd5e1 !important; } /* 行A/Bの境界線（下側） */
	/* --- top banners (2枚看板) --- */
    .top-banners { display:flex; gap:12px; margin:16px auto 20px; max-width:880px; }
    .banner-card { flex:1 1 0; border:1px solid #e5e7eb; border-radius:12px; padding:14px 16px; background:#fff; font-weight:700; cursor:pointer; }
    .banner-card:hover { box-shadow:0 2px 8px rgba(0,0,0,.06); }
    .banner-card small{ display:block; font-weight:500; color:#6b7280; margin-top:4px; }
	/* 看板の赤枠（行より細い 2px） */
    .banner-highlight { outline:2px solid #ef4444; outline-offset:-2px; }

    /* --- row highlight --- */
    .row-highlight { outline:3px solid #ef4444; outline-offset:-3px; transition:outline-color .2s; }

    /* --- merged row (行B) layout --- */
    .merged-cell { padding:8px 12px; }
    .merged-flex { display:flex; align-items:center; gap:12px; } /* 右側ボタンを中央寄せできるようsp-betweenを除去 */
    .merged-title { font-weight:700; flex:1; }                   /* 左側タイトルが左半分を占有 */
    .merged-actions .btn { white-space:nowrap; min-width: calc(33.333% + 48px); } /* 基本1列分より少し長く（左右に少しはみ出す） */
	.merged-actions { flex:1; display:flex; justify-content:center; } /* 右側セルで左右中央寄せ */

    /* --- modal --- */
    .modal-backdrop { position:fixed; inset:0; background:rgba(0,0,0,.45); display:none; align-items:center; justify-content:center; z-index:1000; }
    .modal { width:min(520px, 90vw); background:#fff; border-radius:12px; padding:20px; box-shadow:0 10px 30px rgba(0,0,0,.2); }
    .modal h3 { margin:0 0 8px; font-size:18px; }
    .modal p { margin:0 0 12px; line-height:1.6; }
    .modal .actions { display:flex; gap:8px; justify-content:flex-end; margin-top:12px; }
    .btn-outline { display:inline-block; padding:10px 16px; border-radius:8px; background:#fff; border:1px solid #e5e7eb; color:#111; text-decoration:none; font-weight:600; }
    .modal-backdrop.show { display:flex; }

    /* --- below: plans -> two columns (今後の開発予定 / ご意見) --- */
    .post-sections { max-width:880px; margin:28px auto 0; display:flex; gap:16px; }
    .post-col { flex:1 1 0; }
    .section-card { background:#fff; border:1px solid #e5e7eb; border-radius:12px; padding:16px 18px; }
    /* 見出しはカード外に出すため、カード内h3の指定は廃止 */
    .post-col > .section-title { margin:0 0 10px; font-size:18px; font-weight:800; padding-left:0; text-align:center; }
    .section-card p { font-size:15px; line-height:1.75; margin:10px 0; }
    .section-card .muted { color:#6b7280; font-size:12px; margin:8px 0 0; }
	.section-card .muted { font-size:13px; line-height:1.7; margin:8px 0; }
    .section-card .intro { font-size:15px; line-height:1.7; margin:10px 0; }  /* 左カラム冒頭3文を本文サイズに統一 */
    .section-card ul { margin:8px 0 0 1em; list-style-type: circle; } /* 左インデントを約1文字ぶんに */
	.section-card li { margin:6px 0; }
    .section-card .btn { margin-top:10px; }
    .img-placeholder { margin-top:10px; padding:10px; border:1px dashed #cbd5e1; border-radius:8px; color:#6b7280; font-size:12px; text-align:center; }
    /* カード間の見通しを少し良く */
    .post-sections { gap:20px; margin-top:32px; }
	/* 左カラムだけ padding-top を 8px に（8 + .intro margin-top 10 = 18px） */
    .post-sections .post-col:first-child .section-card { padding-top:8px; }
	/* 右カラムも上側余白を左と同じ18pxに（= padding-top:8px 相当） */
    .post-sections .post-col:last-child .section-card { padding-top:8px; }
	/* 開発予定（左カラム）のみ：囲い＆微調整 */
    .dev-list { background:#F8FAFF; border:1px solid #e5e7eb; border-radius:10px; padding:6px 12px; margin-top:8px; }
    .dev-list ul { margin:4px 0 0 0; padding:0; list-style:none !important; } /* デフォの丸を完全無効化（・は本文で表示） */
    .dev-list li { margin:3px 0; font-size:13px; } /* 説明=13px（li全体） */
    .dev-list li strong { font-size:15px; }        /* タイトル=15px（太字部） */
    .dev-notes p { font-size:12px; line-height:1.25; margin:2px 0; } /* ※注意書き：小さめ＆行間詰め（今回は触らない） */
	/* 右カラム：テキスト＋画像の2カラム風配置（1:2 / 画像は右1/3程度） */
    .feedback-flex { display:flex; align-items:flex-start; gap:12px; }
    .feedback-text { flex:1; } /* 左右50:50に */
    .feedback-fig  { flex:1; display:flex; justify-content:flex-end; }
    .feedback-img  { width:100%; max-width:none; height:auto; background:#f1f5f9; border:1px dashed #cbd5e1; border-radius:8px; }
    /* 右カラム：フォームボタンを左右中央に */
    .actions.center { text-align:center !important; }
  </style>
</head>
<body>
  <div class="title">
    <img src="../assets/icons/hm-38.png" alt="Headline Marker" />
    <h1>Headline Marker プラン比較（テスト）</h1>
  </div>
  <div class="top-banners">
    <button class="banner-card" id="banner-first">
      はじめての方
      <small>クリックすると該当欄が強調表示されます</small>
    </button>
    <button class="banner-card" id="banner-existing">
      ご利用中・ご利用経験のある方
      <small>クリックすると該当欄が強調表示されます</small>
    </button>
  </div>

  <div class="pricing" style="max-width: 880px; margin: 0 auto;">
    <table class="pricing-table" style="width:100%;border-collapse:collapse;background:#fff;">
      <thead>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">機能</th>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">Free</th>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">Basic</th>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">Pro</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">
            見出し登録数<br><small>1ページあたり</small>
          </th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>3件まで</strong></td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>無制限</strong></td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>無制限</strong></td>
        </tr>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">登録可能ページ数</th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>3ページまで</strong></td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>5ページまで</strong></td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>無制限</strong></td>
        </tr>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">ハイライトカラー数</th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">2色</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">全色（12色）</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">全色（12色）</td>
        </tr>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">テキストカラー数</th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">2色（黒／白）</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">全色（3色）</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">全色（3色）</td>
        </tr>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">テキストスタイル変更</th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">—</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">〇</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">〇</td>
        </tr>
        <tr>
          <th style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">バックアップ機能</th>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">—</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;">—</td>
          <td style="border:1px solid #e5e7eb;padding:12px 14px;text-align:center;"><strong>〇</strong></td>
        </tr>
		<tr id="row-first" class="cta-row">
          <th style="border:1px solid #e5e7eb; border-right-color:#cbd5e1; padding:8px 0.5em; text-align:center;">初めて利用する方</th>
          <td style="border:1px solid #e5e7eb; border-right-color:#cbd5e1; padding:8px 0.5em; text-align:center;">—</td>          <!-- Free 列の右境界を #cbd5e1 に -->
          <td style="border:1px solid #e5e7eb; border-right-color:#cbd5e1; padding:8px 0.5em; text-align:center;">               <!-- Basic 列の右境界を #cbd5e1 に -->
            <a class="btn" href="#" data-checkout="https://buy.stripe.com/test_dRm6oz4cU6RGeUz1XMaEE00" onclick="return openFirstModal(this)">プランを選択</a>
          </td>
          <td style="border:1px solid #e5e7eb;padding:8px 0.5em;text-align:center;">
            <a class="btn" href="#" data-checkout="https://buy.stripe.com/test_aFadR14cU1xm4fV59YaEE01" onclick="return openFirstModal(this)">プランを選択</a>
          </td>
        </tr>
        <tr id="row-existing" class="cta-row">
          <th style="border:1px solid #e5e7eb; border-right-color:#cbd5e1; padding:8px 0.5em; text-align:center;">既にご利用経験のある方<br>（解約済み含む）</th>
          <td style="border:1px solid #e5e7eb; padding:8px 0.5em; text-align:center;" colspan="3">
            <div class="merged-actions">
              <a class="btn" href="#" onclick="return openExistingModal()">プラン変更・支払い管理</a>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  <!-- two-column section: 今後の開発予定 / ご意見・ご要望 -->
    <div class="post-sections">
      <div class="post-col">
        <h3 class="section-title">今後の開発予定</h3>
        <div class="section-card">
          <p class="intro"><strong>はじめに：</strong>この拡張は<strong>コード初心者が生成AIと協力して開発</strong>しています。時間がかかる場合がありますが、<strong>ご要望が多いものはできる限り実装</strong>していきます。温かい目で見守っていただけると嬉しいです。</p>
          <div class="dev-list">
            <ul>
              <li>・<strong>同期機能</strong>：<br>Googleアカウントで見出しを同期し、別PCでも同じ見出しにアクセス可能に</li>
              <li>・<strong>見出しのカテゴリ分け</strong>：<br>A/Bなどテーマ単位でページ・見出しを登録し、エクスポート／インポートでカテゴリごとの使い分けも</li>
              <li>・<strong>保存された見出しの管理画面</strong>：<br>一覧・検索・並び替え等の管理UI</li>
              <li>・<strong>外部サービス連携</strong>：<br>Evernote / Google Keep などとの連携</li>
              <li>・<strong>メモ機能</strong>：<br>見出しにあわせて短いメモも登録・表示</li>
              <li>・<strong>UI全体と支払い・プラン管理の使いやすさ改善</strong>：<br>操作導線や設定まわりを順次ブラッシュアップ</li>
            </ul>
          </div>
          <div class="dev-notes">
            <p>※ 記載内容はあくまで<strong>開発予定</strong>です（未実装の場合があります）。</p>
            <p>※ <strong>ご利用状況やフィードバック</strong>に応じて内容・優先度は変わることがあります。</p>
            <p>※ 上から順に着手することを保証するものではありません。</p>
          </div>
        </div>
      </div>

      <!-- 右：ご意見・ご要望 -->
      <div class="post-col">
        <h3 class="section-title">ご意見・ご要望</h3>
        <div class="section-card">
          <p>開発は<strong>ユーザー環境の使い勝手を最優先</strong>に進めています。いただいたご意見はすべて確認し、<strong>重要度や共通性の高いものから優先して実装</strong>していく方針です。短い一言でも大歓迎です。</p>
          <div class="feedback-flex">
            <div class="feedback-text">
              <p class="muted">また、<strong>ポップアップ右下の「ご意見」ボタン</strong>からも送信できます。</p>
              <p class="muted">ご意見は<strong>後から修正（上書き）</strong>できます。まずは使ってみて、タイミングに合わせて更新してください。</p>
            </div>
            <div class="feedback-fig">
              <img class="feedback-img" src="../assets/feedback-entry-ja.png" width="180" height="180" loading="lazy" alt="ポップアップ右下の『ご意見』ボタン（日本語）">
            </div>
          </div>
          <div class="actions center">
            <a class="btn" href="#" id="feedback-ja">ご意見を送る（日本語フォーム）</a>
          </div>
        </div>
      </div>
    </div>
  </div>
    </div> <!-- /.post-sections -->
  </div>   <!-- /.pricing -->
  <!-- Modals -->
  <div id="modal-first" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="mf-title">
      <h3 id="mf-title">初めてのご利用ですか？</h3>
      <p>これは <strong>「初めて有料プランに申し込む方」向け</strong> のリンクです。<br>既に有料プランに利用済み・過去に有料プランを利用したことがある方は、この画面を閉じた後、下段の <strong>「プラン変更・支払い管理」</strong> からお進みください。</p>
      <div class="actions">
        <button class="btn-outline" data-close="modal-first">閉じる</button>
        <button class="btn" id="mf-ok">続行（支払い画面へ）</button>
      </div>
    </div>
  </div>

  <div id="modal-existing" class="modal-backdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-labelledby="me-title">
      <h3 id="me-title">既存ユーザー向けのページです</h3>
      <p>ご購入時のメールアドレスで本人確認を行ってください。<br>
      それ以外のメールではお客様情報が見つかりません。<br>
      もし以前のメールアドレスが分からない場合は、上段の <strong>「初めて利用する方」</strong> からプランを選択して、新しいメールで本人確認し、ご購入いただけます。</p>
      <div class="actions">
        <button class="btn-outline" data-close="modal-existing">閉じる</button>
        <button class="btn" id="me-ok">続行（プラン・支払い管理へ）</button>
      </div>
    </div>
  </div>

  <script>
    // Config
    const PORTAL_LOGIN_URL = "https://billing.stripe.com/p/login/test_dRm6oz4cU6RGeUz1XMaEE00";

    // Row highlight helper (5s)
    function highlightRowById(id){
      const row = document.getElementById(id);
      if(!row) return;
      row.classList.add('row-highlight');
      row.scrollIntoView({ behavior:'smooth', block:'center' });
      setTimeout(()=>row.classList.remove('row-highlight'), 5000);
    }

    // Top banners（行の強調に加えて看板自体も赤枠・5秒）
    function highlightBanner(id){
      const el = document.getElementById(id);
      if(!el) return;
      el.classList.add('banner-highlight');
      setTimeout(()=> el.classList.remove('banner-highlight'), 5000);
    }
    document.getElementById('banner-first')?.addEventListener('click', ()=>{
      highlightRowById('row-first');
      highlightBanner('banner-first');
    });
    document.getElementById('banner-existing')?.addEventListener('click', ()=>{
      highlightRowById('row-existing');
      highlightBanner('banner-existing');
    });

    // First-time modal
    let pendingCheckoutUrl = null;
    window.openFirstModal = function(el){
      pendingCheckoutUrl = el.getAttribute('data-checkout');
      document.getElementById('modal-first').classList.add('show');
      return false;
    };
    document.getElementById('mf-ok').addEventListener('click', ()=>{
      const url = pendingCheckoutUrl;
      pendingCheckoutUrl = null;
      document.getElementById('modal-first').classList.remove('show');
      if(url) window.open(url, '_blank', 'noopener');
    });

    // Existing modal
    window.openExistingModal = function(){
      document.getElementById('modal-existing').classList.add('show');
      return false;
    };
    document.getElementById('me-ok').addEventListener('click', ()=>{
      document.getElementById('modal-existing').classList.remove('show');
      window.open(PORTAL_LOGIN_URL, '_blank', 'noopener');
    });

    // Close buttons
    document.querySelectorAll('[data-close]').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const id = btn.getAttribute('data-close');
        document.getElementById(id)?.classList.remove('show');
      });
    });
  </script>
</body>
</html>
